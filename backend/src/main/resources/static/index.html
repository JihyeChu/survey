<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Form Clone</title>
    <link rel="stylesheet" href="css/styles.css?v=33">
</head>
<body>
    <div class="app-container">
        <!-- Header Navigation -->
        <header class="header">
            <div class="header-content">
                <!-- Form Title Section -->
                <div class="header-left">
                    <div class="header-title" id="tab-title" tabindex="0" role="button" aria-label="설문지 제목 편집">
                        <span class="form-icon" aria-hidden="true">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                            </svg>
                        </span>
                        <span class="form-title-text">새 설문지</span>
                    </div>
                </div>

                <!-- Navigation Tabs -->
                <nav class="header-tabs" role="tablist" aria-label="설문지 탭 네비게이션">
                    <button class="tab-button active" data-tab="questions" id="tab-questions" role="tab" aria-selected="true" aria-controls="view-questions">
                        질문
                    </button>
                    <button class="tab-button" data-tab="responses" id="tab-responses" role="tab" aria-selected="false" aria-controls="view-responses">
                        응답
                    </button>
                    <button class="tab-button" data-tab="settings" id="tab-settings" role="tab" aria-selected="false" aria-controls="view-settings">
                        설정
                    </button>
                </nav>

                <!-- Header Actions -->
                <div class="header-right">
                    <button class="btn btn-my-forms" id="my-forms-btn" title="내 설문 목록">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"/>
                        </svg>
                        <span>내 설문</span>
                    </button>
                    <span class="sync-status" id="sync-status" title="저장 상태">
                        <span class="sync-icon draft">●</span>
                        <span class="sync-text">임시저장</span>
                    </span>
                    <button class="btn btn-publish" id="publish-btn" title="서버에 게시">
                        게시
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Questions View -->
            <section class="view active" id="view-questions" role="tabpanel" aria-labelledby="tab-questions">
                <div class="builder-header">
                    <button class="btn btn-secondary" id="preview-toggle">
                        <span>미리보기</span>
                    </button>
                </div>

                <div id="preview-mode">
                    <!-- Builder Mode Content -->
                    <div class="builder-container" id="builder-container">
                        <div class="questions-list" id="questions-list">
                            <!-- Questions will be inserted here -->
                        </div>
                    </div>

                </div>

                <!-- Preview Mode Content -->
                <div id="preview-content" class="preview-content-hidden">
                    <div class="preview-container" id="preview-container">
                        <!-- Preview will be rendered here -->
                    </div>
                </div>
            </section>

            <!-- Responses View -->
            <section class="view" id="view-responses" role="tabpanel" aria-labelledby="tab-responses">
                <div class="responses-container">
                    <!-- 공유 URL 섹션 -->
                    <div class="share-url-section" id="share-url-section" style="display: none;">
                        <div class="share-url-card">
                            <h3>설문 링크</h3>
                            <div class="share-url-input-group">
                                <input type="text" id="share-url-input" class="share-url-input" readonly />
                                <button id="copy-url-btn" class="copy-url-btn" title="링크 복사">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                                    </svg>
                                    복사
                                </button>
                            </div>
                            <p class="share-url-hint">이 링크를 공유하여 응답을 받으세요</p>
                        </div>
                    </div>

                    <div class="responses-header">
                        <div class="responses-summary">
                            <span class="response-count">0</span>
                            <span class="response-label">개의 응답</span>
                        </div>
                        <button id="refresh-responses-btn" class="refresh-btn" title="새로고침">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
                            </svg>
                        </button>
                    </div>

                    <div class="responses-content" id="responses-content">
                        <!-- 게시 전 상태 -->
                        <div class="view-placeholder" id="responses-not-published">
                            <div class="placeholder-icon">
                                <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor" opacity="0.3">
                                    <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                                </svg>
                            </div>
                            <h2>설문지를 먼저 게시하세요</h2>
                            <p>게시 후 응답을 받을 수 있습니다.</p>
                        </div>

                        <!-- 응답 없음 상태 -->
                        <div class="view-placeholder" id="responses-empty" style="display: none;">
                            <div class="placeholder-icon">
                                <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor" opacity="0.3">
                                    <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                                </svg>
                            </div>
                            <h2>응답 대기 중</h2>
                            <p>아직 응답이 없습니다. 설문지를 공유하여 응답을 받아보세요.</p>
                        </div>

                        <!-- 응답 테이블 -->
                        <div class="responses-table-container" id="responses-table-container" style="display: none;">
                            <table class="responses-table">
                                <thead id="responses-table-head"></thead>
                                <tbody id="responses-table-body"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Settings View -->
            <section class="view" id="view-settings" role="tabpanel" aria-labelledby="tab-settings">
                <div class="settings-container">
                    <div class="settings-card">
                        <h2 class="settings-title">설정</h2>

                        <div class="settings-section">
                            <h3 class="settings-section-title">응답</h3>

                            <div class="settings-option">
                                <div class="settings-option-info">
                                    <span class="settings-option-label">이메일 주소 수집</span>
                                    <span class="settings-option-description">응답자의 이메일 주소를 수집합니다</span>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="setting-collect-email" />
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>

                            <div class="settings-option">
                                <div class="settings-option-info">
                                    <span class="settings-option-label">응답 수정 허용</span>
                                    <span class="settings-option-description">제출 후 응답을 수정할 수 있습니다</span>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="setting-allow-edit" />
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>

                        <div class="settings-section">
                            <h3 class="settings-section-title">표시</h3>

                            <div class="settings-option">
                                <div class="settings-option-info">
                                    <span class="settings-option-label">진행률 표시</span>
                                    <span class="settings-option-description">응답 진행률을 표시합니다</span>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="setting-show-progress" checked />
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>

                        </div>

                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Form List Modal -->
    <div class="modal-overlay" id="form-list-modal" aria-hidden="true">
        <div class="modal-container" role="dialog" aria-labelledby="modal-title" aria-modal="true">
            <div class="modal-header">
                <h2 class="modal-title" id="modal-title">내 설문 목록</h2>
                <button class="modal-close-btn" id="modal-close-btn" aria-label="닫기">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                    </svg>
                </button>
            </div>
            <div class="modal-actions">
                <button class="btn btn-primary" id="create-new-form-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                    </svg>
                    새 설문 만들기
                </button>
            </div>
            <div class="modal-body" id="form-list-container">
                <div class="form-list-loading">
                    <div class="loading-spinner"></div>
                    <span>설문 목록을 불러오는 중...</span>
                </div>
            </div>
        </div>
    </div>

    <script src="js/api.js?v=33"></script>
    <script src="js/app.js?v=33"></script>
</body>
</html>
